<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lanius - Git Repository Visualization</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@8.0.0/dist/browser/signalr.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">LANIUS</h1>
                <div class="header-subtitle">Git Repository Visualization System</div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar Controls -->
            <aside class="sidebar">
                <section class="control-panel">
                    <h2 class="panel-title">Repository</h2>
                    <div class="control-group">
                        <input type="text" id="repo-url" class="input-field" 
                               placeholder="https://github.com/user/repo.git">
                        <button id="clone-btn" class="btn btn-primary">Clone</button>
                    </div>
                    <div class="status-line" id="repo-status"></div>
                </section>

                <section class="control-panel">
                    <h2 class="panel-title">Branch Filter</h2>
                    <div class="control-group">
                        <input type="text" id="branch-pattern" class="input-field" 
                               placeholder="main, release/*" value="main">
                        <button id="filter-btn" class="btn">Apply</button>
                    </div>
                </section>

                <section class="control-panel">
                    <h2 class="panel-title">Replay Mode</h2>
                    <div class="control-group">
                        <label class="control-label">
                            Speed: <span id="speed-display">1.0x</span>
                        </label>
                        <input type="range" id="speed-slider" class="slider" 
                               min="0.1" max="5" step="0.1" value="1.0">
                    </div>
                    <div class="button-row">
                        <button id="replay-start" class="btn btn-primary">Start</button>
                        <button id="replay-pause" class="btn" disabled>Pause</button>
                        <button id="replay-resume" class="btn" disabled>Resume</button>
                        <button id="replay-stop" class="btn" disabled>Stop</button>
                    </div>
                    <div class="status-line" id="replay-status"></div>
                </section>

                <section class="control-panel">
                    <h2 class="panel-title">Statistics</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-label">Total Commits</div>
                            <div class="stat-value" id="stat-commits">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Total Branches</div>
                            <div class="stat-value" id="stat-branches">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Lines Added</div>
                            <div class="stat-value stat-positive" id="stat-additions">+0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Lines Removed</div>
                            <div class="stat-value stat-negative" id="stat-deletions">-0</div>
                        </div>
                    </div>
                </section>

                <section class="control-panel">
                    <h2 class="panel-title">Real-Time Monitor</h2>
                    <div class="button-row">
                        <button id="monitor-start" class="btn">Start</button>
                        <button id="monitor-stop" class="btn" disabled>Stop</button>
                    </div>
                    <div class="status-line" id="monitor-status"></div>
                </section>
            </aside>

            <!-- Visualization Canvas -->
            <main class="visualization-container">
                <div class="canvas-header">
                    <div class="canvas-title">Branch Overview</div>
                    <div class="canvas-info" id="canvas-info"></div>
                </div>
                <svg id="commit-graph" class="commit-graph"></svg>
                
                <!-- Commit Detail Popup -->
                <div id="commit-detail" class="commit-detail hidden">
                    <div class="detail-header">
                        <div class="detail-title">Commit Details</div>
                        <button class="detail-close">&times;</button>
                    </div>
                    <div class="detail-content">
                        <div class="detail-row">
                            <span class="detail-label">SHA:</span>
                            <span class="detail-value" id="detail-sha"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Author:</span>
                            <span class="detail-value" id="detail-author"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Date:</span>
                            <span class="detail-value" id="detail-date"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Branches:</span>
                            <span class="detail-value" id="detail-branches"></span>
                        </div>
                        <div class="detail-message" id="detail-message"></div>
                        <div class="detail-stats">
                            <span class="stat-positive" id="detail-additions"></span>
                            <span class="stat-negative" id="detail-deletions"></span>
                            <span id="detail-files"></span>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
    <script src="js/visualization.js"></script>
</body>
</html>
